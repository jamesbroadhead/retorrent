
AUTOMAKE_OPTIONS = foreign 1.5
DISTCLEANFILES = inst-apps
MAINTAINERCLEANFILES = subdirs configure.in acinclude.m4 configure.files

include admin/deps.am

include admin/Doxyfile.am

package-messages:
	$(MAKE) -f admin/Makefile.common package-messages
	$(MAKE) -C po merge

EXTRA_DIST = admin/* deb/* win32/* macosx/* AUTHORS COPYING ChangeLog INSTALL README kid3.lsm kid3.spec kid3-qt.pro buildlibs.sh kid3-qt/configure-kid3-qt.pl kid3-qt/configure.in kid3-qt/config.pri.in kid3-qt/config.h.in kid3-qt/configure

# generate precompiled header allsys.h.gch for GCC 3.4
pch:
	$(MAKE) -C kid3 pch

# modify Makefiles to build with Qt4
qt4-Makefile:
	sed -i.Qt3 -e 's#-I/usr/share/qt[3]/include#-I/usr/include/qt4 -I/usr/include/qt4/Qt -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4/Qt3Support -I/usr/include/qt4/QtNetwork -I/usr/include/qt4/QtXml#g; s#-l[q]t-mt#-lQtCore -lQtGui -lQtNetwork -lQtXml -lQt3Support#g; s#\(-D[Q]T_THREAD_SUPPORT\)#\1 -DQT3_SUPPORT#g; s#qt[3]#qt4#g; s#\($$([M]OC)\)#\1 $$(DEFS) $$(DEFAULT_INCLUDES) $$(INCLUDES)#g' Makefile kid3/Makefile
