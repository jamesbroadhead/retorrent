#!/usr/bin/env python
"""
Usage:
    find_tfile TARGETS...
    find_tfile --tfilesdir=DIR TARGETS...

Options:
    -t, --tfilesdir The .torrent dir to search within
"""
from os.path import abspath, expanduser
from pprint import pprint

from docopt import docopt

from retorrentlib.find_tfile import find_tfiles


def main(targets, tfilesdir):
    tfilesdir = expanduser(tfilesdir)
    return [i for i in find_tfiles(targets, tfilesdir) if i is not None]


if __name__ == '__main__':
    arguments = docopt(__doc__)
    default_tfilesdir = abspath(expanduser('~/torrents/torrentfiles'))

    results_ = main(arguments['TARGETS'], arguments['--tfilesdir'] or default_tfilesdir)
    pprint(results_)
